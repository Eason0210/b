#!/bin/bash

if [[ $# -eq 0 ]]; then
  >&2 echo "usage: $0 <dir> [query]"
  exit 1
fi

dir=$1
shift

if [[ $# -eq 0 ]]; then
  find "${dir}" -type d -maxdepth 1 -mindepth 1 \
    | awk -F/ '{print $NF}' \
    | fzf
else
  find "${dir}" -type d -maxdepth 1 -mindepth 1 \
    | awk -F/ '{print $NF}' \
    | fzf --filter "$*" \
    | head -1
fi
